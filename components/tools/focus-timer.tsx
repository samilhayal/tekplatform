"use client"
import{useState,useEffect,useRef}from"react";import{Card,CardContent}from"@/components/ui/card";import{Button}from"@/components/ui/button";import{Input}from"@/components/ui/input";import{Play,Pause,RotateCcw,Clock,BookOpen,Lightbulb,AlertCircle,Info}from"lucide-react";export function FocusTimer(){const[time,setTime]=useState(25*60);const[initialTime,setInitialTime]=useState(25*60);const[isRunning,setIsRunning]=useState(false);const[customMinutes,setCustomMinutes]=useState("");const[sessions,setSessions]=useState(0);const intervalRef=useRef<NodeJS.Timeout|null>(null);useEffect(()=>{if(isRunning&&time>0){intervalRef.current=setInterval(()=>{setTime(prev=>{if(prev<=1){setIsRunning(false);setSessions(s=>s+1);if(typeof window!=='undefined'){new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVDgxMn+DyvmwhBi6Azt20ayMGHm7A7+OZSA0PVq/n77BdEwxKm97yumoJC0eP1fHMdSUEJnXM8NuQPwkSXbLo7KdUDgxKmN/yu2wiBjKF0fDMcSUFI3DE7+CXRgwNValY7J9MDQxLmuDzunAqBi59zvHIdSwGJW5/7OGYSQwOVqnl7q5hEgxJl93yuGsfCDCM1fDJcyMEKHXJ8NqNPwgTXLnq7ahVDwxLnN/zu20jBjOBz/DJbyIGJ3DN7+SYSgwNVqrm7q9hEw1KmN/yunAqCDWH1vDJcSMEK3PH8NyOPwgVXrru7alXDwxMnt/zumsfCDOBzvDIbyMGJ3DN7+SYSwwOVqrm7q9fEw1JmN/yu28pCDWH1e/IcSMELHLG79yOPwkVXrzu7alYDwxMnt/zumwfCDOBzvDIbyQGKG/O7+WWSwwOVqnl7a9fEw1JmN/yu3ApCDSH1fDHcCMFLHDG79uNPgkVXrvu7qpYDgxLmd/zumseCDOBze/HbiQGKG/M7+OVSgwOVanl7a9gEgxKl93zuG8pCDOG1fDHcCMFLG/F79uNPgkWXrru7qpYDgxLmd/zu2wcCDKAze/HbiQHKG7M7+OVSg0PVKrl7a9fEgxKlt3zuG8qCTOG1PDGbycFLG7F79qNPQkWXrrv7qpZDgxLmd/zu2wcCDKAze/HbiQHKG7M7+OVSg0PVKrl7a9fEgxKlt3zuG8qCTOG1PDGbycFLG7F79qNPQkWXrrv7qpZDgxLmd/zu2wcCDKAze/HbiQHKG7M7+OVSg0PVKrl7a9fEgxKlt3zuG8qCTOG1PDGbycFLG7F79qNPQkWXrrv7qpZDgxLmd/zu2wcCDKAze/HbiQHKG7M7+OVSg0PVKrl7a9fEgxKlt3zuG8qCTOG1PDGbycFLG7F79qNPQkWXrrv7qpZDgxLmd/zu2wcCDKAze/HbiQHKG7M7+OVSg0PVKrl7a9fEgxKlt3zuG8qCTOG1PDGbycFLG7F79qNPQkWXrrv7qpZDgxL').play().catch(()=>{})}return 0}return prev-1})},1000)}else if(intervalRef.current){clearInterval(intervalRef.current)}return()=>{if(intervalRef.current)clearInterval(intervalRef.current)}},[isRunning,time]);const formatTime=(seconds:number)=>{const mins=Math.floor(seconds/60);const secs=seconds%60;return`${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`};const setPreset=(mins:number)=>{setTime(mins*60);setInitialTime(mins*60);setIsRunning(false)};const setCustom=()=>{const mins=parseInt(customMinutes);if(mins>0&&mins<=120){setTime(mins*60);setInitialTime(mins*60);setIsRunning(false)}};const progress=((initialTime-time)/initialTime)*100;const circumference=2*Math.PI*120;const strokeOffset=circumference-(progress/100)*circumference;return(<div className="w-full max-w-5xl mx-auto space-y-6 animate-in fade-in duration-500"><Card className="border-2 border-purple-100 shadow-xl"><CardContent className="pt-8 px-6 pb-8"><div className="mb-8 text-center"><div className="inline-flex w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-600 shadow-lg mb-4 items-center justify-center"><Clock className="h-8 w-8 text-white"/></div><h1 className="text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2">Odak ZamanlayÄ±cÄ±</h1><p className="text-slate-600">Pomodoro tekniÄŸi ile verimli Ã§alÄ±ÅŸÄ±n</p></div><div className="flex justify-center mb-8"><div className="relative w-64 h-64"><svg className="transform -rotate-90 w-64 h-64"><circle cx="128"cy="128"r="120"stroke="#e9d5ff"strokeWidth="12"fill="none"/><circle cx="128"cy="128"r="120"stroke="url(#gradient)"strokeWidth="12"fill="none"strokeDasharray={circumference}strokeDashoffset={strokeOffset}strokeLinecap="round"className="transition-all duration-1000"/><defs><linearGradient id="gradient"x1="0%"y1="0%"x2="100%"y2="100%"><stop offset="0%"stopColor="#a855f7"/><stop offset="100%"stopColor="#ec4899"/></linearGradient></defs></svg><div className="absolute inset-0 flex flex-col items-center justify-center"><p className="text-6xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">{formatTime(time)}</p><p className="text-sm text-slate-600 mt-2">{isRunning?"Ã‡alÄ±ÅŸÄ±yor...":"DuraklatÄ±ldÄ±"}</p></div></div></div><div className="grid grid-cols-3 gap-4 mb-6"><Button onClick={()=>setIsRunning(!isRunning)}className="h-16 bg-gradient-to-r from-purple-500 to-pink-600">{isRunning?<><Pause className="mr-2"/>Duraklat</>:<><Play className="mr-2"/>BaÅŸlat</>}</Button><Button onClick={()=>{setTime(initialTime);setIsRunning(false)}}variant="outline"className="h-16 border-2"><RotateCcw className="mr-2"/>SÄ±fÄ±rla</Button><Button onClick={()=>{setTime(initialTime);setIsRunning(false);setSessions(0)}}variant="outline"className="h-16 border-2">Temizle</Button></div><div className="grid grid-cols-3 gap-3 mb-6">{[{label:"Odak",mins:25},{label:"KÄ±sa Mola",mins:5},{label:"Uzun Mola",mins:15}].map((preset)=><Button key={preset.mins}onClick={()=>setPreset(preset.mins)}variant="outline"className="h-12"><div className="text-center"><div className="font-semibold">{preset.label}</div><div className="text-xs">{preset.mins} dk</div></div></Button>)}</div><div className="flex gap-3"><Input type="number"value={customMinutes}onChange={(e)=>setCustomMinutes(e.target.value)}placeholder="Ã–zel sÃ¼re (dk)"className="h-12"min="1"max="120"/><Button onClick={setCustom}className="h-12 px-6">Ayarla</Button></div>{sessions>0&&(<div className="mt-8 p-6 rounded-xl bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 animate-in fade-in"><h4 className="font-bold text-purple-900 mb-3">ğŸ“Š BugÃ¼nkÃ¼ Seanslar</h4><div className="text-center"><p className="text-5xl font-bold text-purple-600">{sessions}</p><p className="text-sm text-slate-600 mt-2">Tamamlanan Seans</p></div></div>)}</CardContent></Card><div className="grid md:grid-cols-2 gap-6"><Card className="border-2 border-purple-100"><CardContent className="pt-6"><div className="flex items-start gap-3"><div className="p-2 bg-purple-100 rounded-lg"><BookOpen className="h-5 w-5 text-purple-600"/></div><div><h3 className="font-bold mb-2">NasÄ±l KullanÄ±lÄ±r?</h3><ol className="text-sm text-slate-600 space-y-1 list-decimal list-inside"><li>SÃ¼re seÃ§in veya Ã¶zel girin</li><li>BaÅŸlat butonuna tÄ±klayÄ±n</li><li>SÃ¼re bitince mola verin</li></ol></div></div></CardContent></Card><Card className="border-2 border-pink-100"><CardContent className="pt-6"><div className="flex items-start gap-3"><div className="p-2 bg-pink-100 rounded-lg"><Lightbulb className="h-5 w-5 text-pink-600"/></div><div><h3 className="font-bold mb-2">Pomodoro TekniÄŸi</h3><ul className="text-sm text-slate-600 space-y-1"><li><strong>25 dk:</strong> Odaklanma</li><li><strong>5 dk:</strong> KÄ±sa mola</li><li><strong>4 seans sonra:</strong> 15 dk mola</li></ul></div></div></CardContent></Card><Card className="border-2 border-purple-100"><CardContent className="pt-6"><div className="flex items-start gap-3"><div className="p-2 bg-purple-100 rounded-lg"><AlertCircle className="h-5 w-5 text-purple-600"/></div><div><h3 className="font-bold mb-2">Ã–nemli</h3><ul className="text-sm text-slate-600 space-y-1"><li>Molalarda ekrandan uzaklaÅŸÄ±n</li><li>Dikkat daÄŸÄ±tÄ±cÄ±larÄ± kapatÄ±n</li><li>DÃ¼zenli kullanÄ±m Ã¶nemli</li></ul></div></div></CardContent></Card><Card className="border-2 border-pink-100"><CardContent className="pt-6"><div className="flex items-start gap-3"><div className="p-2 bg-pink-100 rounded-lg"><Info className="h-5 w-5 text-pink-600"/></div><div><h3 className="font-bold mb-2">Ä°lginÃ§</h3><ul className="text-sm text-slate-600 space-y-1"><li>ğŸ… 1980'lerde Francesco Cirillo icat etti</li><li>â±ï¸ VerimliliÄŸi %25 artÄ±rÄ±r</li></ul></div></div></CardContent></Card></div></div>)}